# for details on all options
# https://github.com/apache/flink-kubernetes-operator/blob/main/helm/flink-kubernetes-operator/values.yaml

flink-kubernetes-operator:
  webhook:
    create: true
  
  metrics:
    port: 

  defaultConfiguration:
    # If set to true, creates ConfigMaps/VolumeMounts. If set to false, no configuration will be created.
    # All below fields will be ignored if create is set to false.
    create: true
    # If set to true,
    #      (1) loads the built-in default configuration
    #      (2) appends the below flink-conf and logging configuration overrides
    # If set to false, loads just the overrides as in (2).
    # This option has not effect, if create is equal to false.
    append: true

    # for details of flink-conf.yaml
    # https://github.com/apache/flink-kubernetes-operator/blob/main/helm/flink-kubernetes-operator/conf/flink-conf.yaml
    flink-conf.yaml: |+
      # Flink Config Overrides
      taskmanager.numberOfTaskSlots: 1
      parallelism.default: 1

      kubernetes.operator.metrics.reporter.slf4j.factory.class: org.apache.flink.metrics.slf4j.Slf4jReporterFactory
      kubernetes.operator.metrics.reporter.slf4j.interval: 5 MINUTE
      kubernetes.operator.reconcile.interval: 15 s
      kubernetes.operator.observer.progress-check.interval: 5 s
      
    log4j-operator.properties: |+
      # Flink Operator Logging Overrides
      rootLogger.level = DEBUG
      
    log4j-console.properties: |+
      # Flink Deployment Logging Overrides
      rootLogger.level = DEBUG
      rootLogger.appenderRef.console.ref = ConsoleAppender
      appender.console.name = ConsoleAppender
      appender.console.type = CONSOLE
      appender.console.layout.type = PatternLayout
      appender.console.layout.pattern = %d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %-60c %x - %m%n
      rootLogger.appenderRef.rolling.ref = RollingAppender
      log4j.appender.rolling=org.apache.log4j.RollingFileAppender
      log4j.appender.rolling.name=RollingAppender
      log4j.appender.rolling.immediateFlush=true
      log4j.appender.rolling.File=/tmp/flink/checkpoint/claypotAI.log
      log4j.appender.rolling.Append=true
      log4j.appender.rolling.MaxFileSize=10MB
      log4j.appender.rolling.MaxBackupIndex=5
      log4j.appender.rolling.layout=org.apache.log4j.PatternLayout
      log4j.appender.rolling.layout.ConversionPattern=%d %d{Z} [%t] %-5p (%F:%L) - %m%n
      